<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Studyos â€” Personal Study OS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500&family=Inter:wght@400;500;600;700&family=Lora:ital,wght@0,400;0,500;1,400&display=swap" rel="stylesheet">
    <script type="importmap">
      {
        "imports": {
          "recharts": "https://aistudiocdn.com/recharts@^3.4.1",
          "react/": "https://aistudiocdn.com/react@^19.2.0/",
          "react": "https://aistudiocdn.com/react@^19.2.0",
          "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/"
        }
      }
    </script>
    <style>
      :root {
        --font-sans: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        --font-serif: 'Lora', serif;
        --font-mono: 'Fira Code', monospace;
        
        /* Base HSL values - will be overwritten by JS */
        --accent-hue: 211;
        --accent-saturation: 100%;
        --accent-lightness: 65%;
        --bg-hue: 215;
        --bg-saturation: 25%;
        --bg-lightness: 10%;

        --accent-color: hsl(var(--accent-hue) var(--accent-saturation) var(--accent-lightness));
        --accent-color-glow: hsla(var(--accent-hue) var(--accent-saturation) var(--accent-lightness) / 0.15);
        --accent-text-color-hsl: var(--accent-hue) var(--accent-saturation) 95%;

        --bg-gradient-start-ambient: #071023; /* fallback */
        --bg-gradient-end-ambient: #071826; /* fallback */
      }

      /* Dark Theme (Default) */
      body.theme-dark {
        --text-l: 90%;
        --text-dim-l: 65%;
        --border-alpha: 0.05;
        
        --accent-text-color: hsl(var(--accent-text-color-hsl));
      }

      /* Light Theme */
      body.theme-light {
        --text-l: 10%;
        --text-dim-l: 35%;
        --border-alpha: 0.1;

        --accent-text-color: hsl(var(--accent-hue) 20% 10%);
      }

      /* Shared dynamic colors */
      body {
        --bg-gradient-start: hsl(var(--bg-hue) var(--bg-saturation) var(--bg-lightness));
        --bg-gradient-end: hsl(var(--bg-hue) calc(var(--bg-saturation) + 5%) calc(var(--bg-lightness) - 2%));
        --text-color: hsl(var(--bg-hue) 15% var(--text-l));
        --text-color-dim: hsl(var(--bg-hue) 15% var(--text-dim-l));
        --text-color-accent: hsl(var(--bg-hue) 25% calc(var(--text-l) - 5%));
        --card-bg-gradient-start: hsla(var(--bg-hue) var(--bg-saturation) 100% / 0.02);
        --card-bg-gradient-end: hsla(var(--bg-hue) var(--bg-saturation) 100% / 0.03);
        --card-border-color: hsla(var(--bg-hue) 30% 50% / var(--border-alpha));
        --input-border-color: hsla(var(--bg-hue) 30% 50% / calc(var(--border-alpha) + 0.03));
        --button-outline-hover-bg: hsla(var(--bg-hue) 30% 50% / 0.04);
        --shadow-color: hsla(var(--bg-hue) 50% 2% / 0.4);
        --option-bg-color: hsl(var(--bg-hue) var(--bg-saturation) calc(var(--bg-lightness) + 2%));
      }
      
      body {
        color: var(--text-color);
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }
      
      body.ui-classic {
        background-color: transparent; /* Handled by parallax */
      }
      
      .ui-classic #root {
        max-width: 7xl;
        margin-left: auto;
        margin-right: auto;
      }
      
      .ui-classic .main-content-wrapper {
        padding: 1rem;
      }
      
      .ui-classic.layout-compact .main-content-wrapper {
        padding: 0.5rem;
      }


      body.font-sans { font-family: var(--font-sans); }
      body.font-serif { font-family: var(--font-serif); }
      body.font-mono { font-family: var(--font-mono); }
      
      body.layout-spacious {
          --card-padding: 1rem;
          --widget-gap: 1rem;
      }
      
      body.layout-cozy {
          --card-padding: 0.85rem;
          --widget-gap: 0.85rem;
      }

      body.layout-compact {
          --card-padding: 0.75rem;
          --widget-gap: 0.75rem;
      }
      
      /* --- Modern UI Overrides --- */
      body.ui-modern {
        --card-padding: 0.75rem;
        --widget-gap: 0.75rem;
        background-color: #040811;
        overflow-y: auto; /* Allow vertical scrolling */
        scrollbar-gutter: stable;
      }
      
      @keyframes animated-aurora {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
      }

      .modern-background {
        position: fixed;
        inset: 0;
        z-index: -1;
        background: linear-gradient(125deg, #040811, #071023, #040811, #071826);
        background-size: 400% 400%;
        animation: animated-aurora 30s ease infinite;
      }
      
      .modern-content-perspective {
        perspective: 2000px;
      }

      /* --- Living UI Enhancements --- */

      /* 1. Micro-motions */
      button {
        transition: transform 0.1s ease-out, background-color 0.2s, opacity 0.2s, box-shadow 0.2s;
      }
      button:not(:disabled):hover {
        transform: translateY(-1px);
      }
      button:not(:disabled):active {
        transform: translateY(0px);
      }

      /* 2. Pulsing Timer */
      @keyframes pulsate {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.02); }
      }
      .pulsate {
        animation: pulsate 2.5s infinite ease-in-out;
      }

      /* 3. Theme Glow & 3D Expand on Cards */
      .card-glow-on-hover {
        transition: box-shadow 0.4s ease, transform 0.4s ease, height 0.3s ease-out;
        will-change: transform, box-shadow;
      }
      .card-glow-on-hover:hover {
        z-index: 10;
        box-shadow: 0 10px 30px -10px var(--shadow-color), 0 0 20px var(--accent-color-glow);
        transform: translateZ(20px) scale(1.02);
      }

      /* Card Controls */
      .card-controls {
        position: absolute;
        top: 8px;
        right: 8px;
        display: flex;
        gap: 4px;
        opacity: 0;
        transition: opacity 0.2s;
        z-index: 20;
      }
      .card-glow-on-hover:hover .card-controls {
        opacity: 1;
      }
      .card-control-btn {
        background: rgba(0,0,0,0.3);
        backdrop-filter: blur(4px);
        border: 1px solid rgba(255,255,255,0.1);
        border-radius: 9999px;
        width: 28px;
        height: 28px;
        cursor: pointer;
        color: var(--text-color-dim);
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .card-control-btn:hover {
        background: rgba(255,255,255,0.2);
        color: var(--text-color);
      }

      /* Expanded Card (e.g. for running pomodoro) */
      .card-expanded {
        z-index: 10;
        box-shadow: 0 15px 40px -10px var(--shadow-color), 0 0 30px var(--accent-color-glow);
      }

      /* Minimized Card */
      .card-minimized {
        min-height: 0 !important; /* to override any min-height from widgets */
        height: 50px;
        padding: 0 1rem !important;
        display: flex;
        align-items: center;
        overflow: hidden; /* Hide content */
      }
      .card-minimized-header {
        display: flex;
        width: 100%;
        justify-content: space-between;
        align-items: center;
        font-weight: 600;
        color: var(--text-color-accent);
      }
      
      /* Fullscreen Glass Layer */
      .fullscreen-overlay {
          position: fixed;
          inset: 0;
          background: rgba(0,0,0,0.5);
          backdrop-filter: blur(16px);
          -webkit-backdrop-filter: blur(16px);
          z-index: 100;
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 2rem;
          animation: fadeIn 0.3s ease-out;
      }
      .fullscreen-content {
          width: 100%;
          height: 100%;
          max-width: 90vw;
          max-height: 90vh;
      }
      .fullscreen-content > .card-glow-on-hover {
          height: 100%;
          display: flex;
          flex-direction: column;
          transform: none !important; /* Override hover effects */
          box-shadow: 0 25px 50px -12px rgba(0,0,0,0.5);
      }
      .fullscreen-content > .card-glow-on-hover > * {
         flex-grow: 1;
         min-height: 0; /* Important for flex-grow to work with scrolling content */
         display: flex;
         flex-direction: column;
      }

      @keyframes fadeIn {
        from { opacity: 0; transform: scale(0.95); }
        to { opacity: 1; transform: scale(1); }
      }
      
      /* Kanban Drag & Drop Enhancements */
      .kanban-task-dragging {
        opacity: 0.9 !important;
        transform: rotate(3deg) scale(1.05) !important;
        box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        background: var(--accent-color);
      }
      .kanban-column-over {
          background-color: hsla(var(--accent-hue) var(--accent-saturation) 65% / 0.1) !important;
          outline: 2px dashed hsla(var(--accent-hue) var(--accent-saturation) 65% / 0.5);
          outline-offset: -4px;
      }
      .drop-placeholder {
          height: 50px;
          background-color: hsla(var(--accent-hue) var(--accent-saturation) 65% / 0.2);
          border: 2px dashed hsla(var(--accent-hue) var(--accent-saturation) 65% / 0.7);
          border-radius: 0.5rem;
          margin: 0.5rem 0;
      }

      /* --- High Level Interaction Mechanics --- */

      /* 1. Command Palette */
      .command-palette-overlay {
          position: fixed;
          inset: 0;
          background: rgba(0,0,0,0.5);
          backdrop-filter: blur(8px);
          z-index: 200;
          display: flex;
          justify-content: center;
          padding-top: 15vh;
          animation: fadeIn 0.2s ease-out;
      }
      .command-palette-modal {
          width: 100%;
          max-width: 600px;
          background: rgba(11, 22, 38, 0.9);
          border: 1px solid var(--card-border-color);
          border-radius: 12px;
          box-shadow: 0 25px 50px -12px rgba(0,0,0,0.75);
          overflow: hidden;
          max-height: 50vh;
          display: flex;
          flex-direction: column;
      }
      .command-palette-input {
          width: 100%;
          background: transparent;
          border: none;
          border-bottom: 1px solid var(--card-border-color);
          padding: 1rem;
          font-size: 1.125rem;
          color: var(--text-color);
          outline: none;
      }
      .command-palette-list {
          list-style: none;
          margin: 0;
          padding: 0.5rem;
          overflow-y: auto;
      }
      .command-palette-item {
          padding: 0.75rem 1rem;
          border-radius: 8px;
          cursor: pointer;
          color: var(--text-color-dim);
      }
      .command-palette-item.selected {
          background-color: var(--accent-color);
          color: var(--accent-text-color);
      }

      /* 2. Quick Create Modal */
      .quick-create-overlay {
          position: fixed;
          inset: 0;
          background: rgba(0,0,0,0.5);
          backdrop-filter: blur(8px);
          z-index: 200;
          display: flex;
          align-items: center;
          justify-content: center;
          animation: fadeIn 0.2s ease-out;
      }
      .quick-create-modal {
          width: 100%;
          max-width: 400px;
          background: var(--option-bg-color);
          border: 1px solid var(--card-border-color);
          border-radius: 12px;
          padding: 1.5rem;
          box-shadow: 0 25px 50px -12px rgba(0,0,0,0.75);
      }
      .quick-create-title {
          font-size: 1.25rem;
          font-weight: 600;
          margin-bottom: 1rem;
      }
      .quick-create-tabs {
          display: flex;
          gap: 0.5rem;
          border-bottom: 1px solid var(--card-border-color);
          margin-bottom: 1rem;
      }
      .quick-create-tabs button {
          padding: 0.5rem 1rem;
          border: none;
          background: transparent;
          color: var(--text-color-dim);
          border-bottom: 2px solid transparent;
      }
      .quick-create-tabs button.active {
          color: var(--accent-color);
          border-bottom-color: var(--accent-color);
      }
      .quick-create-form {
          display: flex;
          flex-direction: column;
          gap: 0.75rem;
          margin-bottom: 1.5rem;
      }
      .quick-create-actions {
          display: flex;
          justify-content: flex-end;
          gap: 0.5rem;
      }

      /* 3. Animation States & View Transitions */
       @keyframes view-fade-in {
        from { opacity: 0; transform: scale(0.98); }
        to { opacity: 1; transform: scale(1); }
      }
      @keyframes view-fade-out {
        from { opacity: 1; transform: scale(1); }
        to { opacity: 0; transform: scale(0.98); }
      }
      .view-container {
        animation: view-fade-in 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards;
      }
      .view-container.fading-out {
        animation: view-fade-out 0.3s cubic-bezier(0.7, 0, 0.84, 0) forwards;
        pointer-events: none;
      }
      
      @keyframes fade-in-up {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
      }

      .animate-in {
          animation: fade-in-up 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
          opacity: 0;
      }
      
      /* --- Focus View (Zen Chamber) --- */
      .zen-chamber-overlay {
        position: fixed;
        inset: 0;
        z-index: 150;
        background: #02040a;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        animation: focus-fade-in 0.5s cubic-bezier(0.16, 1, 0.3, 1);
      }
      .zen-chamber-overlay.exiting {
        animation: focus-fade-out 0.5s cubic-bezier(0.7, 0, 0.84, 0) forwards;
      }

      @keyframes focus-fade-in {
        from { opacity: 0; transform: scale(1.05); }
        to { opacity: 1; transform: scale(1); }
      }
      @keyframes focus-fade-out {
        from { opacity: 1; transform: scale(1); }
        to { opacity: 0; transform: scale(1.05); }
      }

      .zen-particle-container {
        position: absolute;
        inset: 0;
        overflow: hidden;
      }
      .zen-particle {
        position: absolute;
        bottom: 0;
        border-radius: 50%;
        background: var(--accent-color);
        opacity: 0;
        animation: float-up linear infinite;
      }

      @keyframes float-up {
        0% { transform: translateY(0); opacity: 0.7; }
        100% { transform: translateY(-100vh); opacity: 0; }
      }
      
      .zen-content {
          position: relative;
          z-index: 1;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
      }
      
      .zen-timer-container {
          /* specific styles for timer in focus view if needed */
      }

      /* --- Premium Mode Widget Upgrades --- */

      /* 1. Pomodoro Timer */
      @keyframes ripple {
        from { transform: scale(0.8); opacity: 0.7; }
        to { transform: scale(1.5); opacity: 0; }
      }
      .ripple-halo {
        position: absolute;
        inset: -10px;
        border: 2px solid var(--accent-color);
        border-radius: 50%;
        animation: ripple 1.5s ease-out;
        pointer-events: none;
      }
      .particle {
        position: absolute;
        background-color: var(--accent-color);
        border-radius: 50%;
        opacity: 0;
        animation: tick-fade 1s ease-in-out forwards;
      }
      @keyframes tick-fade {
        0% { opacity: 0.7; transform: scale(1) translate(0, 0); }
        100% { opacity: 0; transform: scale(0.5) translate(var(--tx, 0), var(--ty, 0)); }
      }
      
      /* --- Hologram Clock & Calendar --- */
      .hologram-container {
        --holo-color: #5aa1ff;
        --glow-color: rgba(90, 161, 255, 0.5);
        transition: --holo-color 1s ease, --glow-color 1s ease;
      }
      .hologram-container.theme-morning { --holo-color: #ffcc88; --glow-color: rgba(255, 204, 136, 0.5); }
      .hologram-container.theme-day { --holo-color: #5aa1ff; --glow-color: rgba(90, 161, 255, 0.5); }
      .hologram-container.theme-evening { --holo-color: #ff8c42; --glow-color: rgba(255, 140, 66, 0.5); }
      .hologram-container.theme-night { --holo-color: #a855f7; --glow-color: rgba(168, 85, 247, 0.5); }

      .hologram-clock {
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
        width: 150px;
        height: 150px;
        margin: 0 auto;
        transform-style: preserve-3d;
        perspective: 1000px;
      }
      .hologram-content {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
      }
      .clock-time-glow {
        font-family: var(--font-mono);
        font-variant-numeric: tabular-nums;
        font-size: 2.5rem;
        font-weight: bold;
        color: var(--holo-color);
        text-shadow: 0 0 5px var(--glow-color), 0 0 10px var(--glow-color), 0 0 20px var(--glow-color);
        animation: subtle-glow 3s infinite ease-in-out, holo-flicker 15s infinite linear;
      }
      @keyframes subtle-glow {
        0%, 100% { text-shadow: 0 0 5px var(--glow-color), 0 0 10px var(--glow-color), 0 0 20px var(--glow-color); }
        50% { text-shadow: 0 0 8px var(--glow-color), 0 0 15px var(--glow-color), 0 0 25px var(--glow-color); }
      }
      @keyframes holo-flicker {
        0%, 10%, 12%, 80%, 82%, 100% { opacity: 1; }
        11%, 81% { opacity: 0.7; }
      }
      .clock-ampm {
        font-family: var(--font-mono);
        color: var(--holo-color);
        opacity: 0.7;
      }

      .progress-ring {
        position: absolute;
        inset: 0;
        transform: rotate(-90deg);
        filter: url(#neon-glow);
      }
      .progress-ring-track {
        fill: transparent;
        stroke: var(--holo-color);
        stroke-width: 3;
        opacity: 0.1;
      }
      .progress-ring-progress {
        fill: transparent;
        stroke: var(--holo-color);
        stroke-width: 4;
        stroke-linecap: round;
        transition: stroke-dashoffset 1s linear;
      }
      .hologram-scanline {
        position: absolute;
        inset: 0;
        background: linear-gradient(0deg, transparent 50%, rgba(255,255,255,0.05) 50.1%);
        background-size: 100% 4px;
        animation: scan 4s linear infinite;
        pointer-events: none;
        opacity: 0.5;
      }
      @keyframes scan {
          from { background-position: 0 0; }
          to { background-position: 0 -150px; }
      }
      
      /* Calendar Styles */
      .calendar-grid-container {
        position: relative;
        height: 180px; /* Adjust as needed */
        overflow: hidden;
      }
      .calendar-grid {
        position: absolute;
        width: 100%;
        height: 100%;
        transition: transform 0.4s cubic-bezier(0.2, 0.8, 0.2, 1), opacity 0.4s;
      }
      .calendar-grid.exiting-next { transform: translateX(-100%) scale(0.9); opacity: 0; }
      .calendar-grid.exiting-prev { transform: translateX(100%) scale(0.9); opacity: 0; }
      .calendar-grid.entering-next { transform: translateX(100%) scale(0.9); opacity: 0; animation: enter-from-right 0.4s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; }
      .calendar-grid.entering-prev { transform: translateX(-100%) scale(0.9); opacity: 0; animation: enter-from-left 0.4s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; }
      @keyframes enter-from-right { to { transform: translateX(0) scale(1); opacity: 1; } }
      @keyframes enter-from-left { to { transform: translateX(0) scale(1); opacity: 1; } }
      
      .calendar-day-flipper { perspective: 1000px; }
      .calendar-day-inner { position: relative; width: 100%; height: 100%; transition: transform 0.6s; transform-style: preserve-3d; }
      .calendar-day-flipper.flipping .calendar-day-inner { transform: rotateY(180deg); }
      .calendar-day-front, .calendar-day-back {
          position: absolute; width: 100%; height: 100%; -webkit-backface-visibility: hidden; backface-visibility: hidden;
          display: flex; align-items: center; justify-content: center; border-radius: 0.5rem;
      }
      .calendar-day-back { transform: rotateY(180deg); background-color: var(--accent-color); color: white; }
      .is-today-glow { text-shadow: 0 0 5px var(--accent-color); }
      
      /* --- Music Player Enhancements --- */
      .glowing-progress-bar {
        -webkit-appearance: none; appearance: none; width: 100%; height: 6px; background: rgba(255, 255, 255, 0.1);
        border-radius: 3px; outline: none;
      }
      .glowing-progress-bar::-webkit-slider-thumb {
        -webkit-appearance: none; appearance: none; width: 16px; height: 16px; background: #fff;
        border-radius: 50%; cursor: pointer; box-shadow: 0 0 10px #fff, 0 0 5px var(--accent-color);
      }
      .glowing-progress-bar.pulsing::-webkit-slider-thumb { animation: pulsate 1.5s infinite; }
      
      .material-press { position: relative; overflow: hidden; }
      .material-press:after { content: ''; position: absolute; top: 50%; left: 50%; width: 5px; height: 5px; background: rgba(255,255,255,0.5); opacity: 0; border-radius: 100%; transform: scale(1,1) translate(-50%); transform-origin: 50% 50%;}
      @keyframes ripple-effect { 0% { transform: scale(0,0); opacity: 1; } 100% { transform: scale(25,25); opacity: 0;} }
      .material-press:focus:not(:active):after { animation: ripple-effect 1s ease-out; }
      
      .playlist-item-lift:hover { transform: translateY(-2px) scale(1.02); background: rgba(255,255,255,0.05); transition: transform 0.2s ease, background-color 0.2s ease; }
      
      .vinyl-record {
        background: radial-gradient(circle, #333 10%, #111 12%, #111 50%, #222 51%, #111 52%, #111 100%);
        border-radius: 50%;
        box-shadow: 0 0 20px rgba(0,0,0,0.7);
        position: relative;
        display: flex; align-items: center; justify-content: center;
      }
      .vinyl-record:before { content: ''; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 25%; height: 25%; background: var(--accent-color); border-radius: 50%; border: 2px solid #333; }
      @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
      .spinning { animation: spin 2s linear infinite; }
      
      
      /* --- Habit Tracker Enhancements --- */
      .habit-orb {
        width: 100%; height: 100%; border-radius: 50%;
        background: radial-gradient(circle at 30% 30%, #fff, #bbb);
        box-shadow: inset -5px -5px 20px rgba(0,0,0,0.3), 0 0 15px var(--accent-color);
        position: relative;
        transform: rotateX(15deg);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
      }
      .habit-orb.cracked {
          background: #555;
          box-shadow: inset -3px -3px 10px rgba(0,0,0,0.5);
      }
      .habit-orb:before { /* Crack line */
          content: ''; position: absolute; top: 20%; left: 50%; width: 2px; height: 60%;
          background: rgba(0,0,0,0.4); transform: rotate(20deg);
          display: none;
      }
      .habit-orb.cracked:before { display: block; }
      .habit-orb-shadow {
        position: absolute; bottom: -10px; left: 50%; transform: translateX(-50%) rotateX(90deg);
        width: 80%; height: 20px; background: rgba(0,0,0,0.4); border-radius: 50%; filter: blur(5px);
      }
      .habit-orb-glow {
        position: absolute; inset: -5px; border-radius: 50%;
        background: var(--accent-color); filter: blur(15px); opacity: 0.5;
        animation: pulsate 3s infinite ease-in-out;
      }
      .cracked .habit-orb-glow { display: none; }
      .habit-orb-text { position: relative; z-index: 1; }
      
      /* --- Modern UI Attendance/Progress Card Styles --- */
      .modern-attendance-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
        gap: 1rem;
      }
      .modern-attendance-card {
        background: rgba(255,255,255,0.03);
        padding: 1rem;
        border-radius: 0.75rem;
        text-align: center;
        border: 1px solid rgba(255,255,255,0.05);
      }
      .modern-attendance-circle-bg { stroke: rgba(255,255,255,0.1); fill: none; }
      .modern-attendance-circle-progress { stroke: var(--accent-color); fill: none; stroke-linecap: round; transition: stroke-dashoffset 0.5s ease-out; }
      
       /* --- Modern UI Classes/Schedule Styles --- */
       .modern-timetable-header, .modern-timetable-row {
          display: grid;
          grid-template-columns: 1fr 1fr 2fr 1fr;
          gap: 1rem;
          padding: 0.75rem 1rem;
          align-items: center;
       }
       .modern-timetable-header {
         font-weight: 600;
         color: var(--text-color-dim);
         border-bottom: 1px solid var(--card-border-color);
       }
       .modern-timetable-row {
         border-radius: 0.5rem;
       }
       .modern-timetable-row:nth-child(odd) {
         background: rgba(255,255,255,0.02);
       }
       
       /* --- Modern UI Notes/Announcements Styles --- */
       .modern-announcement-item {
         padding: 0.75rem 1rem;
         background: rgba(255,255,255,0.03);
         border-radius: 0.5rem;
         display: flex;
         justify-content: space-between;
         align-items: center;
       }

      /* --- Advanced Color Picker --- */
      .color-picker-wrapper {
        width: 100%;
        max-width: 250px;
        background: rgba(255,255,255,0.03);
        padding: 0.75rem;
        border-radius: 0.5rem;
        border: 1px solid var(--card-border-color);
      }
      .color-picker-main {
        display: flex;
        gap: 0.75rem;
        height: 150px;
      }
      .color-picker-saturation {
        flex-grow: 1;
        position: relative;
        cursor: crosshair;
        border-radius: 0.25rem;
        overflow: hidden;
      }
      .color-picker-saturation-handle {
        position: absolute;
        width: 12px;
        height: 12px;
        border: 2px solid white;
        border-radius: 50%;
        transform: translate(-50%, -50%);
        pointer-events: none;
        box-shadow: 0 0 0 1px rgba(0,0,0,0.5);
      }
      .color-picker-hue {
        width: 16px;
        position: relative;
        cursor: pointer;
        background: linear-gradient(to bottom, #f00, #ff0, #0f0, #0ff, #00f, #f0f, #f00);
        border-radius: 0.25rem;
      }
      .color-picker-hue-handle {
        position: absolute;
        left: -2px;
        right: -2px;
        height: 4px;
        background: white;
        border: 1px solid rgba(0,0,0,0.5);
        border-radius: 2px;
        transform: translateY(-50%);
        pointer-events: none;
      }
      .color-picker-inputs {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        margin-top: 0.75rem;
        align-items: center;
      }
      .color-picker-preview {
        width: 32px;
        height: 32px;
        border-radius: 0.25rem;
        border: 1px solid var(--card-border-color);
      }
      .color-picker-inputs label {
        flex-grow: 1;
        text-align: center;
      }
       .color-picker-inputs label span {
         display: block;
         font-size: 0.65rem;
         text-align: center;
         color: var(--text-color-dim);
       }
       
        #root {
          width: 100%;
          height: 100%;
        }

      /* --- Custom Wallpaper --- */
      .custom-wallpaper-image, .custom-wallpaper-live {
          position: fixed;
          inset: 0;
          z-index: -10; /* Behind other backgrounds */
          width: 100vw;
          height: 100vh;
      }
      .custom-wallpaper-image {
          background-size: cover;
          background-position: center;
          background-repeat: no-repeat;
          animation: fadeIn 1s ease-in-out;
      }

    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/index.tsx"></script>
  </body>
</html>